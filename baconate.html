<!DOCTYPE html>
<html>
<head>
<title>The imaginary bacon dispenser</title>
</head>
<body>
<div><button id="bacon-button" onclick="dispenseBacon()"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/NCI_bacon.jpg/48px-NCI_bacon.jpg" alt="bacon!">Get bacon!</button></div>
<div id="bacon-count"></div>
<script type="text/javascript">
var currentBaconCount = 0;
function loadHandler() {
	var loadBaconCount = localStorage.getItem("baconCount");
	if (loadBaconCount) {
		currentBaconCount = parseInt(loadBaconCount);
		if (!isFinite(currentBaconCount)) {
			currentBaconCount = 0;
		}
	}
	displayCurrentCount();
}

function dispenseBacon() {
	currentBaconCount++;
	localStorage.setItem("baconCount", currentBaconCount);
	displayCurrentCount();
}

function displayCurrentCount() {
	var countText = isFinite(currentBaconCount) ? currentBaconCount.toString() : "OVER 9000";
	document.getElementById("bacon-count").innerHTML = countText + " pieces of bacon served!";
}
window.onload = loadHandler;
</script>
</body>
</html>
